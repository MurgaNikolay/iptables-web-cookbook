default: &default
  google_client_id: <%=node['iptables_web']['server']['google']['key'] %>
  google_client_secret: <%=node['iptables_web']['server']['google']['secret'] %>
  google_domains:
    <% Array(node['iptables_web']['server']['google']['domains']).each do |domain| %>
    - <%=domain %>
    <% end %>
<%-
acl = Array(node['iptables_web']['server']['acl'])
if acl.size > 0
%>
  acl:
    <% acl.each do |user| %>
    - <%=user %>
    <% end %>
<%- end %>
  api: #this is temporary solution for automatic node  registration via chef
    key: <%=node['iptables_web']['server']['registration']['key'] %>
    token: <%=node['iptables_web']['server']['registration']['token'] %>
    user:  <%=node['iptables_web']['server']['registration']['user'] %>
development:
  <<: *default

production:
  <<: *default
